<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¯ÙˆØ¯Ø© - Low current</title>
<style>
body { background:#ccf2ff; font-family:Tahoma; margin:0; overflow:hidden; display:flex; justify-content:center; align-items:flex-start; height:100vh; }
#container { display:flex; margin-top:20px; }
#sidebar-left { width:220px; max-height:90vh; overflow-y:auto; background:#f0f8ff; padding:10px; margin-right:10px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
#sidebar-left h4 { text-align:center; }
.answered { margin-bottom:6px; padding:4px 6px; background:#d1ffd1; border-radius:4px; }
#maze-wrapper { position:relative; }
#header { text-align:center; font-weight:bold; font-size:18px; margin-bottom:10px; }
#sidebar-right { width:180px; padding:10px; background:#fff0f5; margin-left:10px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.2); text-align:center; }
#maze { position:relative; width:500px; height:500px; background:#fff; border:6px solid #2b6fb3; border-radius:12px; }
.snake-segment { position:absolute; width:20px; height:20px; background:#4CAF50; border-radius:50%; border:2px solid #2E7D32; z-index:10; transition: all 0.05s linear; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:bold; color:white; }
.snake-head { background:#FF5722; border-color:#D84315; }
.q-node { position:absolute; width:50px; height:50px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; font-weight:bold; z-index:5; color:white; font-size:18px; }
#questionBox { position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:20px; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.3); width:350px; display:none; z-index:20; }
#questionBox h3 { font-size:16px; margin-bottom:12px; }
.choice { background:#ddd; padding:10px; margin:8px; border-radius:8px; cursor:pointer; font-size:14px; }
.choice:hover { background:#bbb; }
#winScreen { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,200,0,0.9); color:white; font-size:32px; display:flex; justify-content:center; align-items:center; flex-direction:column; display:none; }
#snakeLength { font-size:16px; font-weight:bold; color:#4CAF50; margin-top:10px; }

/* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media only screen and (max-width: 768px) {
  body { align-items:center; }
  #container { flex-direction:column; align-items:center; margin-top:5px; width:100%; padding:5px; box-sizing:border-box; }
  #sidebar-left { width:95%; max-width:none; margin:0 0 10px 0; max-height:120px; font-size:13px; order:1; }
  #maze-wrapper { order:2; width:100%; display:flex; flex-direction:column; align-items:center; }
  #header { font-size:14px; padding:5px; margin-bottom:5px; }
  #maze { width:95vmin; height:95vmin; max-width:500px; max-height:500px; border:4px solid #2b6fb3; }
  .snake-segment { width:18px; height:18px; font-size:10px; border-width:2px; }
  .q-node { width:32px; height:32px; font-size:14px; }
  #sidebar-right { width:95%; max-width:none; margin:10px 0 0 0; font-size:15px; order:3; padding:8px; }
  #questionBox { width:90%; max-width:500px; padding:20px; }
  #questionBox h3 { font-size:18px; margin-bottom:15px; line-height:1.5; }
  .choice { padding:14px 12px; margin:10px 0; font-size:16px; border-radius:10px; line-height:1.4; }
  #winScreen { font-size:24px; padding:20px; text-align:center; }
  .answered { font-size:12px; padding:5px 6px; line-height:1.3; }
  #sidebar-left h4, #sidebar-right h4 { font-size:14px; margin:5px 0; }
}
</style>
</style>
</head>
<body>
<div id="container">
  <div id="sidebar-left">
    <h4>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</h4>
    <div id="answeredList"></div>
  </div>

  <div id="maze-wrapper">
    <div id="header">Ø§Ù„Ù…Ø±Ø¬Ø¹ ÙÙŠ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„Ø®ÙÙŠÙ|Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„ data network 12</div>
    <div id="maze" id="maze"></div>
  </div>

  <div id="sidebar-right">
    <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø©</h4>
    <p id="roundInfo">Ø§Ù„Ø¬ÙˆÙ„Ø©: 1</p>
    <p id="questionInfo">Ø§Ù„Ø³Ø¤Ø§Ù„: 0 / 0</p>
    <p id="snakeLength">Ø·ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ¯Ø©: 3</p>
  </div>
</div>

<div id="questionBox">
  <h3 id="qText"></h3>
  <div id="choices"></div>
</div>

<div id="winScreen">
  ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©! ğŸ‰
  <audio id="winSound" src="../media/win.mp3"></audio>
</div>

<script>
// ********** Ø§Ù„Ø£Ø³Ø¦Ù„Ø© **********
const allQuestions = [
    // 1. Ù…ÙÙ‡ÙˆÙ… Server ÙˆÙˆØ¸ÙŠÙØªÙ‡
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø«Ù„ ÙƒÙ…Ø¨ÙŠÙˆØªØ± **Super Accessible Computer** ÙŠØªÙƒÙˆÙ† Ù…Ù† Ø°Ø§ÙƒØ±Ø© Ø¶Ø®Ù…Ø©ØŒ ÙˆÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ù‡ØŒ ÙˆÙŠÙ‚ÙˆÙ… Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø®Ø¯Ù…Ø§ØªÙ‡ Ù„ÙƒÙ„ Ù…Ù† ÙŠØ·Ù„Ø¨Ù‡Ø§ (Clients)ØŸ",
        c: ["Ø§Ù„Ù€ Modem", "Ø§Ù„Ù€ Switch", "Ø§Ù„Ù€ Router", "Ø§Ù„Ù€ Server"],
        a: 3 
    },
    // 2. Ø·Ø±ÙŠÙ‚Ø© ÙˆØµÙˆÙ„ Ø§Ù„Ù€ Client Ø¥Ù„Ù‰ Ø§Ù„Ù€ Server
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ…ÙƒÙ† Ø¨Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ (Client) Ù…Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù€ ServerØŸ",
        c: ["Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØµÙØ­ (Browser) Ù…Ø«Ù„ Google Ø£Ùˆ Firefox", "Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙƒØ§Ø¨Ù„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù…Ø¨Ø§Ø´Ø±", "Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ Mac Address ÙÙ‚Ø·", "Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¬Ù‡Ø§Ø² Ø§Ù„Ù€ PDU"],
        a: 0 
    },
    // 3. Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù€ Server Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
    {
        q: "READ: ÙˆÙŠÙ‚ÙˆÙ… Ø¨ Server Ø­Ø³Ø¨ Ø·Ù„Ø¨Ù‡ Ø¨ØªÙˆÙÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ®Ø¯Ù…Ø§Øª Ø®Ø§ØµØ© Ø­Ø³Ø¨ Ø·Ø¨ÙŠØ¹Ø© ØªØ·Ø¨ÙŠÙ‚Ø§ØªÙ‡. Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù€ Server Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ©ØŸ",
        c: ["Mail Server", "Web Server", "Database Server", "Proxy Server"],
        a: 1 
    },
    // 4. ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù€ Rack
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ¹ØªØ¨Ø± Ø¨Ù…Ø«Ø§Ø¨Ø© **Passive Network** Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø¨ÙƒØ©ØŒ Ø­ÙŠØ« ÙŠÙ‚ÙˆÙ… Ø¨ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ÙØ¯Ø§Ø±Ø© Ø¨Ø¯Ø§Ø®Ù„Ù‡ ÙˆÙŠØ¹Ù…Ù„ ÙƒÙ†Ù‚Ø·Ø© ØªÙˆØ²ÙŠØ¹ Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ù†Ù‰ Ø§Ù„ØªØ­ØªÙŠØ© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©ØŸ",
        c: ["Ø§Ù„Ù€ Patch Panel", "Ø§Ù„Ù€ Cable Organizer", "Ø§Ù„Ù€ Rack", "Ø§Ù„Ù€ Server"],
        a: 2 
    },
    // 5. Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ ÙŠØ¬Ù…Ø¹Ù‡Ø§ Ø§Ù„Ù€ Rack
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªØ¬Ù…ÙŠØ¹Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ RackØŸ",
        c: ["Data switch Ùˆ Cable organizer Ùˆ Patch panel Ùˆ Power distribution Unit", "Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙƒÙŠÙŠÙ ÙˆÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©", "Ø§Ù„Ù…Ù‚Ø§Ø¨Ø³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© ÙÙ‚Ø·", "Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø·Ø±ÙÙŠØ© Ù…Ø«Ù„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§Øª"],
        a: 0 
    },
    // 6. Ø¹Ø±Ø¶ Ø§Ù„Ù€ Rack Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ (Standard Width) Ù„Ù„Ù€ **Rack**ØŸ",
        c: ["15-inch", "19-inch (482.6 mm)", "21-inch", "23-inch (584.2 mm)"],
        a: 1 
    },
    // 7. ØªØ¹Ø±ÙŠÙ ÙˆØ­Ø¯Ø© U (Unit)
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù„Ù‚ÙŠØ§Ø³ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªØ±ÙƒÙŠØ¨Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ RackØŸ",
        c: ["Ø§Ù„Ù…ØªØ± (Meter)", "Ø§Ù„Ù€ U (Unit)", "Ø§Ù„Ù€ Inch", "Ø§Ù„Ù€ Centimeter"],
        a: 1 
    },
    // 8. Ù‚ÙŠØ§Ø³ Ø§Ù„Ù€ U
    {
        q: "ÙƒÙ… ÙŠØ³Ø§ÙˆÙŠ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù€ **U** Ø§Ù„ÙˆØ§Ø­Ø¯Ø© (Unit) Ø¨Ø§Ù„Ø¨ÙˆØµØ© (Inches)ØŸ",
        c: ["1.00 Inch", "1.25 Inch", "1.75 Inch", "2.00 Inch"],
        a: 2 
    },
    // 9. Ø£Ù‚ØµÙ‰ Ø³Ø¹Ø© Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ù„Ù€ Rack
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ Ù‚ÙŠØ§Ø³ÙŠ Ù„Ù„Ù€ **Rack** ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø¹Ø§Ø¯Ø© ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ©ØŸ",
        c: ["24 U", "36 U", "42 U", "52 U"],
        a: 2 
    },
    // 10. Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙŠ ØªØµÙ…ÙŠÙ… Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙŠ ØªØµÙ…ÙŠÙ… Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ",
        c: ["ØªØ­Ø¯ÙŠØ¯ Ù…ÙƒØ§Ù† Ø§Ù„Ù€ Rack", "ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ ÙÙŠ ÙƒÙ„ Ø¨Ù„Ø¯", "Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù€ Server", "Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø¬Ù‡Ø²Ø©"],
        a: 1 
    },
    // 11. Ø¯ÙˆØ± Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ÙÙŠ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø´Ø¨ÙƒØ©
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ÙÙŠ Ù…Ø±Ø­Ù„Ø© ØªØµÙ…ÙŠÙ… Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ",
        c: ["Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙÙ‚Ø·", "ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©ØŒ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø®Ø·Ø· Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©ØŒ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆØ§ÙØ± ÙƒØ§ÙÙ ÙÙŠ Ø§Ù„Ù€ Rack", "ÙÙ‚Ø· Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±", "ÙÙ‚Ø· ØªØ­Ø¯ÙŠØ¯ Ø·ÙˆÙ„ Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª"],
        a: 1 
    },
    // 12. ØªØµÙ†ÙŠÙ Ø§Ù„Ø§ØªØµØ§Ù„ ÙÙŠ Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø¹Ù…Ù„ (Workgroup vs Domain)
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¨ÙŠÙ† Ø´Ø¨ÙƒØ© **Workgroup** ÙˆØ´Ø¨ÙƒØ© **Domain**ØŸ",
        c: ["Ø´Ø¨ÙƒØ© **Workgroup** Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª", "Ø´Ø¨ÙƒØ© **Domain** ØªØªÙƒÙˆÙ† Ù…Ù† Ø¬Ù‡Ø§Ø²ÙŠÙ† ÙÙ‚Ø·", "Ø´Ø¨ÙƒØ© **Workgroup** ØªÙƒÙˆÙ† Ù…Ù† Ø¹Ø¯Ø¯ Ù…Ø­Ø¯ÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø¨ÙŠÙ†Ù…Ø§ **Domain** ØªÙƒÙˆÙ† Ø£ÙƒØ¨Ø± ÙˆØªØªØ·Ù„Ø¨ Ø®Ø§Ø¯Ù… (Server)", "Ø´Ø¨ÙƒØ© **Domain** Ù„Ø§ ØªØ­ØªØ§Ø¬ Ù„ÙƒØ§Ø¨Ù„Ø§Øª"],
        a: 2 
    },
    // 13. Ø£Ù‡Ù…ÙŠØ© Ù…Ø¹Ø±ÙØ© Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø§ÙØ° (Ports) Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
    {
        q: "Ù„Ù…Ø§Ø°Ø§ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø´Ø¨ÙƒØ§Øª ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø§ÙØ° Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ø¬Ù‡Ø§Ø² (ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ Ù‡Ø§ØªÙØŒ ØªÙ„ÙØ²ÙŠÙˆÙ†)ØŸ",
        c: ["Ù„Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª", "Ù„ØªØ­Ø¯ÙŠØ¯ Ø³Ø¹Ø© Ø§Ù„Ù€ Switch ÙˆØ§Ù„Ù€ Patch Panel Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹", "Ù„Ù…Ø¹Ø±ÙØ© ÙƒÙ…ÙŠØ© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ‡Ù„ÙƒØ©", "Ù„ØªÙ‚Ù„ÙŠÙ„ Ù…Ø³Ø§ÙØ© Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª"],
        a: 1 
    },
    // 14. Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù€ Patch Panel Ù„Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ©
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© Ø§Ù„ØªÙŠ ÙŠØ­ØªØ§Ø¬Ù‡Ø§ **Patch Panel** Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ© (FO)?",
        c: ["Ø³ÙˆÙŠØªØ´ (Switch) ÙÙ‚Ø·", "Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³ÙˆÙŠÙƒØªØ§Øª Ù†Ø­Ø§Ø³ÙŠØ©", "Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³ÙˆÙŠÙƒØªØ§Øª (Connectors) Ù„Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙƒØ§Ø¨Ù„Ø§Øª FO Ù…Ø¹ Ø§Ù„Ù€ **Fiber Optic Patch Panel**", "ÙƒØ§Ø¨Ù„Ø§Øª Ù†Ø­Ø§Ø³ÙŠØ© CAT 6 ÙÙ‚Ø·"],
        a: 2 
    },
    // 15. Ø­Ø¬Ù… Ø§Ù„Ù€ Fiber Optic Patch Panel
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø¬Ù… (Ø¨Ø§Ù„ÙˆØ­Ø¯Ø© U) Ø§Ù„Ø°ÙŠ ÙŠØ­ØªØ§Ø¬Ù‡ **Fiber Optic Patch Panel** Ùˆ **Cable Management** ÙÙŠ Ø§Ù„Ù€ RackØŸ",
        c: ["1 U", "2 U", "3 U", "4 U"],
        a: 1 
    },
    // 16. Ø§Ù„Ù€ Units Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù€ Switch (24 Port)
    {
        q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª (Units) Ø§Ù„ØªÙŠ ÙŠØ­ØªØ§Ø¬Ù‡Ø§ **Switch** Ø³Ø¹Ø© 24 Ù…Ù†ÙØ° Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ RackØŸ",
        c: ["1 U", "2 U", "3 U", "4 U"],
        a: 0 
    },
    // 17. ØªÙ‚Ø¯ÙŠØ± Ø¹Ø¯Ø¯ ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù€ Rack Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù…Ø«Ø§Ù„ 1)
    {
        q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„Ø¯ÙŠÙ†Ø§ 5 Ù…Ø­ÙˆÙ„Ø§Øª (Switches) Ø³Ø¹Ø© 24 Ù…Ù†ÙØ°ØŒ ÙÙƒÙ… ÙˆØ­Ø¯Ø© **U** Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø³Ù†Ø­ØªØ§Ø¬ ÙÙŠ Ø§Ù„Ù€ Rack (Ù…Ø¹ Ø§Ù„Ø£Ø®Ø° ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± 3 ÙˆØ­Ø¯Ø§Øª ØªÙˆØ²ÙŠØ¹ Ø·Ø§Ù‚Ø© (PDU) Ùˆ 2 ÙˆØ­Ø¯Ø© Ù„Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ© Ùˆ Cable ManagementØŒ ÙˆÙ†Ø³Ø¨Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠ 20%ØŸ",
        c: ["15 U", "17 U", "20 U", "25 U"],
        a: 2 // Ø§Ù„Ø­Ø³Ø§Ø¨: (5 Switches * 1U) + 2U (Fiber/CM) + 3U (PDU) = 10U. Ø§Ù„Ù€ 20% Ø§Ø­ØªÙŠØ§Ø·ÙŠ = 2U. Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ = 12U. (Ù„ÙƒÙ† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙÙŠ Ø§Ù„Ù†Øµ 17UØŒ Ø³Ù†ØªØ¨Ø¹ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆØ§Ø±Ø¯ ÙÙŠ Ø§Ù„Ù†Øµ 5 * 3 + 2 = 17) -> *Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù†Øµ ÙŠØ¹Ø·ÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù„ÙƒÙ† Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© 'Ù„ÙŠØµØ¨Ø­ Ø§Ù„Ø¹Ø¯Ø¯ 17 U' Ù„Ø§ ØªØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±.*
    },
    // 18. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù€ U
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„ØªÙŠ ØªÙ…Ø«Ù„ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª (No. Of U) Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ù€ Rack ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù†ØµØŸ",
        c: ["No. of U = No. of Cores Ã— 3 + 4 + 20% spare", "No. of U = No. of Routers Ã— 2 + 5 + 10% spare", "No. of U = No. of Switches Ã— 3 + 4 + 20% spare", "No. of U = No. of Ports Ã· 2 + 10"],
        a: 2 
    },
    // 19. ØªØ¹Ø±ÙŠÙ Data Interference (ØªÙƒØ±Ø§Ø± Ù…Ù† Ø§Ù„ØµÙØ­Ø© 10)
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø°ÙŠ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø¸Ø§Ù‡Ø±Ø© Ø¹Ø¨ÙˆØ± Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª Ø§Ù„Ù†Ø­Ø§Ø³ÙŠØ© Ø£Ø¹Ù„Ù‰ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ø­Ø¯ÙˆØ¯Ù‡Ø§ Ø¹Ø¨Ø± Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ØŒ Ù…Ù…Ø§ Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©ØŸ",
        c: ["Ø§Ù„ØªÙˆÙ‡ÙŠÙ† (Attenuation)", "ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data Interference)", "Ø§Ù„ØªØ±Ø¯Ø¯ Ø§Ù„ØªÙˆØ§ÙÙ‚ÙŠ (Harmonic Frequency)", "Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ Ø§Ù„ÙƒÙ‡Ø±ÙˆÙ…ØºÙ†Ø§Ø·ÙŠØ³ÙŠØ© (EMI)"],
        a: 1 
    },
    // 20. Ø£Ù‚ØµÙ‰ Ù…Ø³Ø§ÙØ© Ù„Ù€ SMF (ØªÙƒØ±Ø§Ø± Ù…Ù† Ø§Ù„ØµÙØ­Ø© 10)
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù‚ØµÙˆÙ‰ Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ­Ø§ÙØ¸ ÙÙŠÙ‡Ø§ ÙƒØ§Ø¨Ù„Ø§Øª Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© Ø£Ø­Ø§Ø¯ÙŠØ© Ø§Ù„Ù†Ù…Ø· **SMF** Ø¹Ù„Ù‰ Ù‚ÙˆØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù„Ø·Ø¨Ù‚Ø§Øª Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ù‚ØµÙŠØ±Ø©ØŸ",
        c: ["400 Ù…ØªØ±Ù‹Ø§", "100 ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ù‹Ø§", "400 ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ù‹Ø§", "50 Ù…ØªØ±Ø§Ù‹"],
        a: 1 
    },
    // 21. Ø£Ù‚ØµÙ‰ Ù…Ø³Ø§ÙØ© Ù„Ù€ MMF (ØªÙƒØ±Ø§Ø± Ù…Ù† Ø§Ù„ØµÙØ­Ø© 10)
    {
        q: "Ù…Ø§ Ù‡Ùˆ Ø£Ù‚ØµÙ‰ Ù…Ø¯Ù‰ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØµÙ„ Ø¥Ù„ÙŠÙ‡ Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„ÙƒØ§Ø¨Ù„Ø§Øª Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø£Ù†Ù…Ø§Ø· **MMF**ØŸ",
        c: ["200 Ù…ØªØ±Ù‹Ø§", "400 Ù…ØªØ±Ù‹Ø§", "850 Ù…Ù„Ù…", "2 ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ù‹Ø§"],
        a: 1 
    },
    // 22. Ù…Ø¹ÙŠØ§Ø± TIA/EIA ÙˆØªØ­Ø¯ÙŠØ« OM5 (ØªÙƒØ±Ø§Ø± Ù…Ù† Ø§Ù„ØµÙØ­Ø© 10)
    {
        q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø§Ù„ØªÙŠ Ø§Ø¹ØªØ±ÙØª Ø¨Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© OM1, OM2, OM3, Ùˆ OM4ØŒ ÙˆÙ‚Ø§Ù…Øª Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ ÙÙŠ ÙŠÙˆÙ†ÙŠÙˆ 2017 Ù„ÙŠØ´Ù…Ù„ **OM5**ØŸ",
        c: ["IEEE", "ITU-T", "ISO/IEC 11801", "TIA/EIA (TIA-492AAAE)"],
        a: 3 
    }
];

// ********** Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª **********
let maze = document.getElementById("maze");
let speed = 1.5;
let keys = {};
let currentQuestion = null;
let currentRoundQuestions = [];
let questionNodes = [];
let roundCounter = 1;
let remainingQuestions = [...allQuestions];
let roundSize = 10;
let answeredCorrectlyFirstTime = new Set();
let isMoving = true; // Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø±ÙƒØ© Ø§Ù„Ø¯ÙˆØ¯Ø©

// Ø§Ù„Ø¯ÙˆØ¯Ø©
let snake = [];
let snakeSegments = [];
let direction = {x: 1, y: 0}; // Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: ÙŠÙ…ÙŠÙ†
let segmentDistance = 25; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† ÙƒÙ„ Ù†Ù‚Ø·Ø©

const correctSound = new Audio('../media/correct.mp3');
const wrongSound = new Audio('../media/wrong.mp3');
const winSound = new Audio('../media/win.mp3');

function getRandomColor(){const letters='0123456789ABCDEF';let color='#';for(let i=0;i<6;i++)color+=letters[Math.floor(Math.random()*16)];return color;}
function shuffle(array){for(let i=array.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}

// ********** Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ¯Ø© **********
function createSnake() {
    // Ù…Ø³Ø­ Ø§Ù„Ø¯ÙˆØ¯Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    snake = [];
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø±ÙƒØ² Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø¬Ù… Ø§Ù„Ù…ØªØ§Ù‡Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ
    let centerX = maze.offsetWidth / 2;
    let centerY = maze.offsetHeight / 2;
    
    // Ø¥Ù†Ø´Ø§Ø¡ 3 Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    for(let i = 0; i < 3; i++) {
        snake.push({x: centerX, y: centerY + (i * segmentDistance)});
    }
    renderSnake();
}

function renderSnake() {
    // Ø­Ø°Ù Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    snakeSegments.forEach(seg => seg.remove());
    snakeSegments = [];
    
    // Ø±Ø³Ù… Ø§Ù„Ø¯ÙˆØ¯Ø©
    snake.forEach((segment, index) => {
        let seg = document.createElement('div');
        seg.className = 'snake-segment';
        if(index === 0) {
            seg.classList.add('snake-head');
            // Ø§Ù„Ø±Ø£Ø³ Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…
        } else {
            // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¬Ø³Ù… Ø¹Ù„ÙŠÙ‡ Ø£Ø±Ù‚Ø§Ù…
            seg.textContent = index;
        }
        seg.style.left = segment.x + 'px';
        seg.style.top = segment.y + 'px';
        
        maze.appendChild(seg);
        snakeSegments.push(seg);
    });
    
    updateSnakeLength();
}

function growSnake() {
    // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø¢Ø®Ø± Ø§Ù„Ø¯ÙˆØ¯Ø©
    let tail = snake[snake.length - 1];
    let beforeTail = snake[snake.length - 2];
    
    // Ø­Ø³Ø§Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    let dx = tail.x - beforeTail.x;
    let dy = tail.y - beforeTail.y;
    let distance = Math.sqrt(dx * dx + dy * dy);
    
    if(distance > 0) {
        let ratio = segmentDistance / distance;
        snake.push({
            x: tail.x + dx * ratio,
            y: tail.y + dy * ratio
        });
    } else {
        snake.push({x: tail.x, y: tail.y + segmentDistance});
    }
    renderSnake();
}

function shrinkSnake() {
    // ØªÙ‚ØµÙŠØ± Ø§Ù„Ø¯ÙˆØ¯Ø© (Ø­Ø°Ù Ø¢Ø®Ø± Ù†Ù‚Ø·Ø©)
    if(snake.length > 2) { // Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù†Ù‚Ø·ØªÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
        snake.pop();
        renderSnake();
    }
}

function updateSnakeLength() {
    document.getElementById('snakeLength').textContent = `Ø·ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ¯Ø©: ${snake.length}`;
}

// ********** Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ± **********
function createNodes(questions){
    questionNodes.forEach(n=>n.remove());
    questionNodes=[];
    questions.forEach((q)=>{
        addNode(q);
    });
    updateRoundInfo();
}

function addNode(question){
    let node = document.createElement('div');
    node.className='q-node';
    node.dataset.question=question.q;
    let nodeNumber = questionNodes.length + 1; // Ø±Ù‚Ù… Ø§Ù„ÙƒØ±Ø© (1ØŒ 2ØŒ 3ØŒ ...)
    node.textContent = nodeNumber;
    
    // ********** Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ÙƒÙˆØ± **********
    let cols = 3; // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙÙŠ Ø§Ù„Ù…ØªØ§Ù‡Ø©
    let rows = Math.ceil(currentRoundQuestions.length / cols); // Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ù…Ø­Ø³ÙˆØ¨
    
    let mazeWidth = maze.offsetWidth;
    let mazeHeight = maze.offsetHeight;
    let nodeSize = 50; // Ø­Ø¬Ù… Ø§Ù„ÙƒØ±Ø© (50px ÙƒÙ…Ø§ ÙÙŠ CSS)
    let margin = 40; // Ù‡Ø§Ù…Ø´ Ù„ØªØ±Ùƒ Ù…Ø³Ø§ÙØ© Ø¹Ù† Ø§Ù„Ø­ÙˆØ§Ù

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ
    let stepX = (mazeWidth - 2 * margin) / (cols - 1 || 1);
    let stepY = (mazeHeight - 2 * margin) / (rows - 1 || 1);

    // Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø§Ù„Ø±Ù‚Ù… ÙŠÙ…Ø«Ù„ ØªØ±ØªÙŠØ¨Ù‡Ø§)
    let colIndex = (nodeNumber - 1) % cols;
    let rowIndex = Math.floor((nodeNumber - 1) / cols);

    let x = margin + (colIndex * stepX) - (nodeSize / 2);
    let y = margin + (rowIndex * stepY) - (nodeSize / 2);

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¶Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯
    x = Math.max(margin, Math.min(x, mazeWidth - margin - nodeSize));
    y = Math.max(margin, Math.min(y, mazeHeight - margin - nodeSize));
    
    // ********** Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© **********
    
    node.style.left = x+'px';
    node.style.top = y+'px';
    node.style.background = getRandomColor();
    maze.appendChild(node);
    questionNodes.push(node);
}
// ********** Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ **********
function showQuestion(node){
    if(currentQuestion!==null) return;
    currentQuestion = node;
    isMoving = false; // ØªÙˆÙ‚Ù Ø§Ù„Ø¯ÙˆØ¯Ø©
    
    const qb = document.getElementById("questionBox");
    qb.style.display="block";

    const qData = currentRoundQuestions.find(q=>q.q===node.dataset.question);
    document.getElementById("qText").textContent = qData.q;

    const ch = document.getElementById("choices");
    ch.innerHTML="";
    let choices = qData.c.map((txt,index)=>({txt,index}));
    choices = shuffle(choices);

    choices.forEach(choice=>{
        let d=document.createElement("div");
        d.className="choice";
        d.textContent=choice.txt;
        d.onclick=()=>{
            if(choice.index===qData.a){
                correctSound.play();

                // Ø£ÙˆÙ„ Ù…Ø±Ø© ØµØ­ÙŠØ­Ø© - ØªØ·ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ¯Ø©!
                if(!answeredCorrectlyFirstTime.has(qData.q)){
                    answeredCorrectlyFirstTime.add(qData.q);
                    document.getElementById("answeredList").innerHTML+=
                        `<div class="answered">${qData.q} - Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${qData.c[qData.a]}</div>`;
                    remainingQuestions = remainingQuestions.filter(q=>q.q!==qData.q);
                    
                    // ØªØ·ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ¯Ø©
                    growSnake();
                }

                // Ø¥Ø²Ø§Ù„Ø© ÙƒÙ„ Ø§Ù„ÙƒÙˆØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„
                questionNodes.filter(n=>n.dataset.question===qData.q)
                             .forEach(n=>n.remove());
                questionNodes = questionNodes.filter(n=>n.dataset.question!==qData.q);

                currentQuestion = null;
                isMoving = true; // Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ø­Ø±ÙƒØ©
                qb.style.display="none";
                updateRoundInfo();

                if(questionNodes.length===0) startNextRound();
            } else {
                wrongSound.play();
                
                // ØªÙ‚ØµÙŠØ± Ø§Ù„Ø¯ÙˆØ¯Ø©
                shrinkSnake();
                
                alert("Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!");
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                node.remove();
                questionNodes = questionNodes.filter(n=>n!==node);
                // Ø¥Ø¶Ø§ÙØ© ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù†ÙØ³ Ø§Ù„Ø³Ø¤Ø§Ù„
                addNode(qData);
                currentQuestion = null;
                isMoving = true; // Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ø­Ø±ÙƒØ©
                qb.style.display="none";
                updateRoundInfo();
            }
        };
        ch.appendChild(d);
    });
}

// ********** Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ **********
function checkQuestionNodes(){
    if(currentQuestion!==null) return;
    let head = snake[0];
    questionNodes.forEach(node=>{
        let nx=node.offsetLeft, ny=node.offsetTop;
        if(Math.abs(head.x-nx)<40 && Math.abs(head.y-ny)<40){ 
            showQuestion(node); 
        }
    });
}

// ********** Ø­Ø±ÙƒØ© Ø§Ù„Ø¯ÙˆØ¯Ø© **********
// Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: Ø§Ù„Ø£Ø³Ù‡Ù…
document.addEventListener('keydown', e=> {
    e.preventDefault();
    if(e.key === 'ArrowUp' && direction.y === 0) {
        direction = {x: 0, y: -1};
    } else if(e.key === 'ArrowDown' && direction.y === 0) {
        direction = {x: 0, y: 1};
    } else if(e.key === 'ArrowLeft' && direction.x === 0) {
        direction = {x: -1, y: 0};
    } else if(e.key === 'ArrowRight' && direction.x === 0) {
        direction = {x: 1, y: 0};
    }
});

// Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: Ø§Ù„Ø³Ø­Ø¨ (Swipe)
let touchStartX = 0;
let touchStartY = 0;
let touchEndX = 0;
let touchEndY = 0;

document.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
}, {passive: true});

document.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    touchEndY = e.changedTouches[0].screenY;
    handleSwipe();
}, {passive: true});

function handleSwipe() {
    let diffX = touchEndX - touchStartX;
    let diffY = touchEndY - touchStartY;
    
    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø£Ù‚ÙˆÙ‰ (Ø£ÙÙ‚ÙŠ Ø£Ùˆ Ø±Ø£Ø³ÙŠ)
    if(Math.abs(diffX) > Math.abs(diffY)) {
        // Ø­Ø±ÙƒØ© Ø£ÙÙ‚ÙŠØ©
        if(diffX > 20 && direction.x === 0) {
            // Ø³Ø­Ø¨ ÙŠÙ…ÙŠÙ†
            direction = {x: 1, y: 0};
        } else if(diffX < -20 && direction.x === 0) {
            // Ø³Ø­Ø¨ Ø´Ù…Ø§Ù„
            direction = {x: -1, y: 0};
        }
    } else {
        // Ø­Ø±ÙƒØ© Ø±Ø£Ø³ÙŠØ©
        if(diffY > 20 && direction.y === 0) {
            // Ø³Ø­Ø¨ ØªØ­Øª
            direction = {x: 0, y: 1};
        } else if(diffY < -20 && direction.y === 0) {
            // Ø³Ø­Ø¨ ÙÙˆÙ‚
            direction = {x: 0, y: -1};
        }
    }
}

function moveSnake(){
    if(!isMoving) {
        requestAnimationFrame(moveSnake);
        return;
    }
    
    // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø±Ø£Ø³ ÙÙŠ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ
    let head = snake[0];
    let newX = head.x + (direction.x * speed);
    let newY = head.y + (direction.y * speed);
    
    // Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø§Ø´Ø© - Ø§Ø±ØªØ¯Ø§Ø¯ (Ù…Ø¹ Ø£Ø®Ø° Ø­Ø¬Ù… Ø§Ù„Ù†Ù‚Ø·Ø© ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø±)
    let segmentSize = parseFloat(getComputedStyle(document.querySelector('.snake-segment') || document.createElement('div')).width) || 20;
    
    if(newX < segmentSize/2 || newX > maze.offsetWidth - segmentSize/2) {
        direction.x = -direction.x;
        newX = Math.max(segmentSize/2, Math.min(maze.offsetWidth - segmentSize/2, newX));
    }
    if(newY < segmentSize/2 || newY > maze.offsetHeight - segmentSize/2) {
        direction.y = -direction.y;
        newY = Math.max(segmentSize/2, Math.min(maze.offsetHeight - segmentSize/2, newY));
    }
    
    // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø±Ø£Ø³
    snake[0] = {x: newX, y: newY};
    
    // ØªØ­Ø¯ÙŠØ« Ù…ÙˆØ§Ù‚Ø¹ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø±Ø£Ø³ Ø¨Ù…Ø³Ø§ÙØ§Øª Ø«Ø§Ø¨ØªØ©
    for(let i = 1; i < snake.length; i++) {
        let prev = snake[i - 1];
        let curr = snake[i];
        
        let dx = prev.x - curr.x;
        let dy = prev.y - curr.y;
        let distance = Math.sqrt(dx * dx + dy * dy);
        
        if(distance > 0) {
            let ratio = segmentDistance / distance;
            snake[i] = {
                x: prev.x - dx * ratio,
                y: prev.y - dy * ratio
            };
        }
    }
    
    renderSnake();
    checkQuestionNodes();
    requestAnimationFrame(moveSnake);
}

// ********** Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© **********
function startNextRound(){
    if(remainingQuestions.length===0){
        document.getElementById('winScreen').style.display='flex';
        winSound.play();
        return;
    }

    currentRoundQuestions=[];
    
    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø®Ù„Ø·ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨
    // let shuffled = shuffle([...remainingQuestions]); // <== ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø®Ù„Ø·
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨
    let questionsToUse = [...remainingQuestions];
    
    for(let i=0; i<Math.min(roundSize, questionsToUse.length); i++){
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø©
        currentRoundQuestions.push({...questionsToUse[i]}); 
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ¯Ø© Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø¨Ø­Ø¬Ù…Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠ
    createSnake();
    
    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ù†Ù…Ø±Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§ Ù„Ù„Ø¬ÙˆÙ„Ø©
    createNodes(currentRoundQuestions); 
    roundCounter++;
}

// ********** ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª **********
function updateRoundInfo(){
    let answeredCount = currentRoundQuestions.filter(q=>answeredCorrectlyFirstTime.has(q.q)).length;
    document.getElementById("roundInfo").textContent = `Ø§Ù„Ø¬ÙˆÙ„Ø©: ${roundCounter}`;
    document.getElementById("questionInfo").textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„: ${answeredCount} / ${currentRoundQuestions.length}`;
}

// ********** Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© **********
createSnake();
startNextRound();
moveSnake();
</script>
</body>
</html>
